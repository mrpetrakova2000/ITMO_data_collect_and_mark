# ITMO_data_collect_and_mark

# Лабораторная работа 3 "Разметка данных"
См. файл Lab3Marking.ipynb

## Выводы по работе
Были поставлены задачи:
* Напишите ТЗ(в свободной форме) для разметки датасета. 
* Добавление валидатора (принимаются подмешивание тестовых кейсов/рассчет метрики согласованности – в этом случае нужно будет предостаивть разметку от минимум 2х людей).
* Отправка собранного (но неразмеченного!) датасета знакомому с курса с предложением разметить по ТЗ. Получить обратную связь.
Для разметки допустимо использовать одну из онлайн-платформ или самостоятельные инструменты (предоставьте инструмент вашему разметчику).
* Анализ полученных результатов разметки на наличие выбросов/дубликатов/некорректных результатов. Применить методы для их коррекции или удаления. Оценить метрику согласованности, либо квалификацию вашего разметчика на подмешанных тестовых кейсах.
* Рефлексия на тему процесса разметки данных и качества полученных результатов.

## Реализация
Стоял выбор между двумя вариантами разметки:
- разметка бренда (поскольку функция для извлечения бренда из ЛР1 реализована не универсальной и ошибается)
- разметка типа сыра (твердый, полутвердый, рассольный и т.д.) по известным данным (жирность, is_creamy, категория - Бри, Пармезан и т.д.)
Первая разметка более простая и не требует экспертизы в области сыров. Второй вариант предполагает бОльшую сложность для разметчика и может допускать субъективность, однако, выглядит как более понятная для модели машинного обучения задача.

В этой работе была реализована разметка брендов сыра для возможности дальнейшего обучения модели с NER (https://www.kaggle.com/code/eneszvo/ner-named-entity-recognition-tutorial).

**ТЗ для разметчика:** Разметить бренды для каждого уникального наименования сыра. Пример:

| Название                                                    | Бренд             |
|-------------------------------------------------------------|-------------------|
| Сыр плавленый Viola Сливочный 35% БЗМЖ 130г                 | Viola             |
| Плавленый продукт Рязанский ЗПС колбасный копченый 45% 300г | Рязанский ЗПС     |
| Сыр Сернурский СЗ Сернурская Легенда 45% 300г               | Сернурский СЗ     | 
| Сыр Брест-Литовск Тильзитер нарезка 45% 130г                | Брест-Литовск     |
| Сыр М Свежесть Косичка копченая 40% 100г                    | М Свежесть        |
| Сыр творожный Савушкин Воздушный сливочный 60% 150г         | Савушкин          |
| Сыр плавленый Карат Дружба 45% 90г                          | Карат             |
| Сыр Premiere of taste мягкий с белой плесенью Камамбер 125г | Premiere of taste |
| Сыр Магнит Белорусское золото 45% весовой                   | Магнит            |
| Сыр Мега Мастер Чечил Боровский 45% 100г 60% 150г"          | Мега Мастер       |

В качестве валидатора были подмешаны тестовые кейсы, с которыми впоследствии сравнивались ответы разметчика, тестовые примеры заполнили где-то 6-7% от общего числа уникальных названий продуктов.

Разметка проведена с помощью сервиса Google Sheets: https://docs.google.com/spreadsheets/d/1OGNTovui8utSQ92NAzAKQFLr5Dk_0AjxBfuSQJlBy-A/edit?usp=sharing.

**Обратная связь от разметчика:**
"Трудности разметки состояли в том, что попадались примеры с неоднозначным брендом: пример (при получении информации из name) - были сыры с брендом Савушкин, были с брендом Sveza, а попадались примеры с Савушкин Sveza. Не понятно, что писать в таком случае. Сама разметка довольно очевидная и не заняла много времени."

Далее был проведен анализ работы разметчика. По результатам валидации с тестовыми кейсами качество разметки показало 100% точности. Это может быть следствием как относительной простоты задачи разметчика, так и слабостью валидатора. Также, в датасете было поле, в котором была предпринята попытка автоматического заполнения поля бренд. Приняв разметку человека за истину, получили как результат сравнения всего 17%.

**Итоги**
Что получилось:

- Ручная разметка значительно улучшила покрытие брендов. Поскольку написание функции для парсинга и поиска бренда по наименованию не дала успешных результатов (точность ), необходимо использование модели типа NRE (например) для точного заполнения признака.
- Проведено сравнение результатов ручной разметки и валидационной выборки (точность разметчика: 100%). Ввиду относительной простоты задачи, ошибок не было допущено
- Проведено сравнение результатов ручной разметки человеком и автоматической (из ЛР1 парсинг по полю name). Приняв ручную разметку за истину, получили точность автоматической разметки как: 17%.

Мысли:

- Как вариант разметки дополнительной можно рассмотреть разметку категории сыра (твердый, мягкий, полутвердый и т.д)
  
Применение:
- Анализ ценовой политики по брендам
- Построение модели для прогнозирования спроса
- 
Финальный вывод: Разметка качественная, но можно рассмотреть другие варианты ТЗ для разметки с новыми целями.

# Лабораторная работа 1 "Введение в сбор данных"
См. файл Lab1StoreScraping.ipynb

## Выводы по работе
Были поставлены задачи:
* Сбор данных из двух разных источников (открытый датасет / веб-скрейпинг или API).
* Агрегация в единый датасет.
* Разведывательный анализ данных (EDA).
* Базовые визуализации для основных признаков с учетом разметки данных.
* Возможные применения этих данных в контексте машинного обучения.
* Описание датасета

**Реализована идея:**

Получить данные о продуктах и ценах на них в разных магазинах, для возможности поиска наиболее выгодных предложений, с извлечением дополнительных признаков из описания товаров и поддержкой гибкого добавления новых источников (магазинов).

**Реализация:**

Был произведен веб-скрейпинг данных с сайтов https://magnit.ru/ (Магнит) и https://5ka.ru/ (Пятерочка). В данной работе производится сбор данных о ценах на товары категории "Сыр", за продолжительное время (в идеале, за каждый день). Данные обработаны, агрегированы и записаны в БД. Получены результаты аналитики и визуализации изменений по дням цен и скидок. Идея для дальнейшей разметки - метка "Бренд" ввиду сложности разработки алгоритма точного выделения этого признака из наименования.

**Применение для машинного обучения:**

Предсказание цены и размера скидки на товар как для временного ряда.
